"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}window.yall=function(e){var n={intersectionObserverSupport:"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype,mutationObserverSupport:"MutationObserver"in window,idleCallbackSupport:"requestIdleCallback"in window,eventsToBind:[[document,"scroll"],[document,"touchmove"],[window,"resize"],[window,"orientationchange"]]},o=_extends({lazyClass:"lazy",lazyBackgroundClass:"lazy-bg",lazyBackgroundLoading:"lazy-bg-loading",lazyBackgroundLoaded:"lazy-bg-loaded",lazyBackgroundError:"lazy-bg-error",throttleTime:200,idlyLoad:!1,idleLoadTimeout:100,threshold:200,observeChanges:!1,observeRootSelector:"body",mutationObserverOptions:{childList:!0,subtree:!0}},e),t="img."+o.lazyClass+",video."+o.lazyClass+",iframe."+o.lazyClass+",."+o.lazyBackgroundClass,a={timeout:o.idleLoadTimeout},i=function(e){return[].slice.call(e)},s=function(e){if("IMG"===e.tagName){var t=e.parentNode;"PICTURE"===t.tagName&&i(t.querySelectorAll("source")).forEach(function(e){return l(e)}),l(e)}if("VIDEO"===e.tagName&&(i(e.querySelectorAll("source")).forEach(function(e){return l(e)}),l(e),!0===e.autoplay&&e.load()),"IFRAME"===e.tagName&&l(e),e.classList.contains(o.lazyBackgroundClass)){var r=e.getAttribute("data-src");if(e.classList.remove(o.lazyBackgroundClass),null===r)e.classList.add(o.lazyBackgroundLoaded);else{e.classList.add(o.lazyBackgroundLoading);var n=new Image;n.onload=function(){e.style.backgroundImage=["url(",r,")"].join(""),e.classList.add(o.lazyBackgroundLoaded)},n.onerror=function(){e.classList.add(o.lazyBackgroundError)},n.src=r}}},l=function(e){null!==e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset")),null!==e.getAttribute("data-src")&&e.setAttribute("src",e.getAttribute("data-src")),null!==e.getAttribute("data-poster")&&e.setAttribute("poster",e.getAttribute("data-poster"))},r=function yallBack(){var e=!1;!1===e&&0<c.length&&(e=!0,setTimeout(function(){c.forEach(function(t){t.getBoundingClientRect().top<=window.innerHeight+o.threshold&&t.getBoundingClientRect().bottom>=-o.threshold&&"none"!==getComputedStyle(t).display&&(!0===o.idlyLoad&&!0===n.idleCallbackSupport?requestIdleCallback(function(){s(t)},a):s(t),t.classList.remove(o.lazyClass),c=c.filter(function(e){return e!==t}))}),e=!1,0===c.length&&!1===o.observeChanges&&n.eventsToBind.forEach(function(e){return e[0].removeEventListener(e[1],yallBack)})},o.throttleTime))},c=i(document.querySelectorAll(t));if(!0===n.intersectionObserverSupport){var u=new IntersectionObserver(function(e,r){e.forEach(function(e){if(!0===e.isIntersecting||0<e.intersectionRatio){var t=e.target;!0===o.idlyLoad&&!0===n.idleCallbackSupport?requestIdleCallback(function(){return s(t)},a):s(t),t.classList.remove(o.lazyClass),r.unobserve(t),c=c.filter(function(e){return e!==t})}})},{rootMargin:o.threshold+"px 0%"});c.forEach(function(e){return u.observe(e)})}else n.eventsToBind.forEach(function(e){return e[0].addEventListener(e[1],r)}),r();!0===n.mutationObserverSupport&&!0===o.observeChanges&&new MutationObserver(function(e){return e.forEach(function(){i(document.querySelectorAll(t)).forEach(function(e){-1===c.indexOf(e)&&(c.push(e),!0===n.intersectionObserverSupport?u.observe(e):r())})})}).observe(document.querySelector(o.observeRootSelector),o.mutationObserverOptions)};